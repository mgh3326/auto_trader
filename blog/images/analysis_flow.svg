<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 700">
  <!-- Background -->
  <rect width="1200" height="700" fill="#0f172a"/>

  <!-- Title -->
  <text x="600" y="50" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="32" font-weight="bold" fill="#ffffff" text-anchor="middle">AI 분석부터 대시보드까지의 데이터 흐름</text>

  <!-- Step 1: Data Collection -->
  <g transform="translate(50, 120)">
    <rect width="300" height="120" rx="15" fill="#1e40af"/>
    <text x="150" y="40" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">1️⃣ 데이터 수집</text>
    <text x="150" y="70" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#e2e8f0" text-anchor="middle">KIS / yfinance / Upbit</text>
    <text x="150" y="95" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">일봉 200개 + 분봉 데이터</text>
  </g>

  <!-- Arrow 1 -->
  <defs>
    <marker id="arrow1" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
    </marker>
  </defs>
  <line x1="350" y1="180" x2="430" y2="180" stroke="#10b981" stroke-width="4" marker-end="url(#arrow1)"/>

  <!-- Step 2: AI Analysis -->
  <g transform="translate(430, 120)">
    <rect width="300" height="120" rx="15" fill="#7c3aed"/>
    <text x="150" y="40" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">2️⃣ AI 분석</text>
    <text x="150" y="70" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#e2e8f0" text-anchor="middle">Google Gemini API</text>
    <text x="150" y="95" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">프롬프트 실행 (30초~1분)</text>
  </g>

  <!-- Arrow 2 -->
  <marker id="arrow2" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
    <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
  </marker>
  <line x1="730" y1="180" x2="810" y2="180" stroke="#10b981" stroke-width="4" marker-end="url(#arrow2)"/>

  <!-- Step 3: Save to DB -->
  <g transform="translate(810, 120)">
    <rect width="300" height="120" rx="15" fill="#059669"/>
    <text x="150" y="40" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">3️⃣ DB 저장</text>
    <text x="150" y="70" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#e2e8f0" text-anchor="middle">PostgreSQL</text>
    <text x="150" y="95" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="14" fill="#d1fae5" text-anchor="middle">StockAnalysisResult 테이블</text>
  </g>

  <!-- Problem Box (Before DB) -->
  <rect x="50" y="280" width="680" height="100" rx="10" fill="#7f1d1d"/>
  <text x="390" y="310" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="18" font-weight="bold" fill="#fca5a5" text-anchor="middle">문제점 (DB 저장 전)</text>
  <text x="70" y="340" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#fee2e2">❌ 매번 AI API 호출 필요 → 30초~1분 대기</text>
  <text x="70" y="365" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#fee2e2">❌ Gemini API 비용 발생 (호출당 과금)</text>

  <!-- Solution Box (After DB) -->
  <rect x="810" y="280" width="300" height="100" rx="10" fill="#065f46"/>
  <text x="960" y="310" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="18" font-weight="bold" fill="#10b981" text-anchor="middle">해결책 (DB 저장 후)</text>
  <text x="830" y="340" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#d1fae5">✓ 즉시 조회 (밀리초)</text>
  <text x="830" y="365" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#d1fae5">✓ API 비용 절감</text>

  <!-- Step 4: API Endpoint -->
  <g transform="translate(810, 420)">
    <rect width="300" height="100" rx="15" fill="#0369a1"/>
    <text x="150" y="35" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">4️⃣ API 엔드포인트</text>
    <text x="150" y="60" font-family="Apple SD Gothic Neo, Courier, monospace" font-size="13" fill="#bae6fd" text-anchor="middle">GET /api/latest-results</text>
    <text x="150" y="85" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="14" fill="#94a3b8" text-anchor="middle">필터링 + 페이지네이션</text>
  </g>

  <!-- Arrow 3 (DB to API) -->
  <marker id="arrow3" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
    <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
  </marker>
  <line x1="960" y1="240" x2="960" y2="420" stroke="#10b981" stroke-width="4" marker-end="url(#arrow3)"/>

  <!-- Step 5: Dashboard -->
  <g transform="translate(50, 420)">
    <rect width="680" height="100" rx="15" fill="#f59e0b"/>
    <text x="340" y="35" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">5️⃣ 웹 대시보드</text>
    <text x="340" y="60" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="15" fill="#fef3c7" text-anchor="middle">http://127.0.0.1:8000/stock-latest</text>
    <text x="340" y="85" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="14" fill="#fffbeb" text-anchor="middle">통계 카드 + 필터링 테이블 + 히스토리 모달</text>
  </g>

  <!-- Arrow 4 (API to Dashboard) -->
  <marker id="arrow4" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
    <polygon points="0 0, 10 3, 0 6" fill="#10b981"/>
  </marker>
  <line x1="810" y1="470" x2="730" y2="470" stroke="#10b981" stroke-width="4" marker-end="url(#arrow4)"/>

  <!-- Performance Comparison -->
  <rect x="50" y="560" width="1100" height="120" rx="10" fill="#1e293b"/>

  <text x="600" y="595" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="22" font-weight="bold" fill="#ffffff" text-anchor="middle">성능 비교</text>

  <g transform="translate(100, 615)">
    <rect width="450" height="50" rx="8" fill="#7f1d1d"/>
    <text x="225" y="20" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="16" font-weight="bold" fill="#fca5a5" text-anchor="middle">DB 없이 매번 AI 호출</text>
    <text x="225" y="40" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="14" fill="#fee2e2" text-anchor="middle">30초~1분 대기 + API 비용</text>
  </g>

  <g transform="translate(650, 615)">
    <rect width="450" height="50" rx="8" fill="#065f46"/>
    <text x="225" y="20" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="16" font-weight="bold" fill="#10b981" text-anchor="middle">DB에 저장 후 재사용</text>
    <text x="225" y="40" font-family="Apple SD Gothic Neo, Arial, sans-serif" font-size="14" fill="#d1fae5" text-anchor="middle">즉시 조회 (밀리초) + 비용 절감</text>
  </g>
</svg>
