# ========================================
# Auto Trader 환경 변수 설정
# ========================================

# ========================================
# KIS (한국투자증권) 설정
# ========================================
# KIS API 앱 키
KIS_APP_KEY=your_kis_app_key_here
# KIS API 시크릿
KIS_APP_SECRET=your_kis_app_secret_here
# KIS 액세스 토큰 (최초엔 비워두고 자동 발급)
KIS_ACCESS_TOKEN=
# KIS 계좌번호 (형식: 12345678-01 또는 1234567801)
KIS_ACCOUNT_NO=your_account_number_here

# KIS WebSocket 설정
# ========================================
# Mock 모드 (테스트용, 실제 연결하지 않음)
KIS_WS_IS_MOCK=false
# HTS ID (WebSocket 인증용)
KIS_WS_HTS_ID=your_hts_id_here
# 재연결 대기 시간 (초)
KIS_WS_RECONNECT_DELAY_SECONDS=5
# 최대 재연결 시도 횟수
KIS_WS_MAX_RECONNECT_ATTEMPTS=10
# Ping 전송 간격 (초)
KIS_WS_PING_INTERVAL=30
# Ping 응답 대기 시간 (초)
KIS_WS_PING_TIMEOUT=10

# ========================================
# Telegram 설정
# ========================================
# Telegram 봇 토큰 (에러 알림 및 거래 알림에 공통 사용)
TELEGRAM_TOKEN=your_telegram_bot_token_here
# Telegram 채팅 ID (거래 알림 및 에러 알림 전송)
TELEGRAM_CHAT_ID=123456789

# ========================================
# 전략 설정
# ========================================
# 상위 N개 종목 선택
TOP_N=30
# 하락률 임계값 (%)
DROP_PCT=-3.0

# ========================================
# 스케줄러 설정
# ========================================
# Cron 표현식 (매시 정각)
CRON=0 * * * *

# ========================================
# Google Gemini API 설정
# ========================================
# 단일 Google API 키 (기본값)
GOOGLE_API_KEY=your_google_api_key_here
# 여러 Google API 키 (콤마로 구분, 선택사항)
GOOGLE_API_KEYS=key1,key2,key3

# ========================================
# OpenClaw (Gateway Webhook) 설정
# ========================================
# OpenClaw 연동 활성화 여부
OPENCLAW_ENABLED=false
# OpenClaw webhook URL (Gateway)
OPENCLAW_WEBHOOK_URL=http://localhost:18789/hooks/agent
# OpenClaw 토큰 (Gateway webhook auth)
OPENCLAW_TOKEN=
# OpenClaw 콜백 토큰 (Auto Trader가 수신할 때 검증용)
OPENCLAW_CALLBACK_TOKEN=
# OpenClaw 콜백 URL (Auto Trader가 수신)
OPENCLAW_CALLBACK_URL=http://localhost:8000/api/v1/openclaw/callback

# ========================================
# OpenDART 설정
# ========================================
# OpenDART API 키
OPENDART_API_KEY=your_opendart_api_key_here

# ========================================
# MCP 서버 설정
# ========================================
# MCP 전송 방식 (streamable-http | sse | stdio)
MCP_TYPE=streamable-http
# MCP 바인딩 호스트
MCP_HOST=0.0.0.0
# MCP 포트
MCP_PORT=8765
# MCP 경로
MCP_PATH=/mcp
# MCP 보유종목 조회용 사용자 ID (기본: 1)
MCP_USER_ID=1
# MCP 서버 Bearer Token 인증 (비워두면 인증 비활성)
# 라즈베리파이 배포 시 Tailscale 없이 HTTPS 보안을 위한 토큰 인증
# 생성 방법: openssl rand -hex 32
MCP_AUTH_TOKEN=

# ========================================
# 업비트 설정
# ========================================
# 업비트 액세스 키
UPBIT_ACCESS_KEY=your_upbit_access_key_here
# 업비트 시크릿 키
UPBIT_SECRET_KEY=your_upbit_secret_key_here
# 분할 매수 금액 (기본: 100000원)
UPBIT_BUY_AMOUNT=100000
# 최소 KRW 잔고 (기본: 100000원)
UPBIT_MIN_KRW_BALANCE=100000

# ========================================
# 데이터베이스 설정
# ========================================
# PostgreSQL 연결 URL
DATABASE_URL=postgresql+asyncpg://username:password@localhost:5432/database_name

# ========================================
# JWT 인증 설정
# ========================================
# JWT 서명을 위한 비밀 키
# ⚠️  보안 경고: 절대 기본값 사용 금지! 프로덕션에서는 반드시 강력한 랜덤 키로 변경 필수!
# 생성 방법: openssl rand -hex 32
# 최소 32자 이상, 영문/숫자 조합 필수
# 예시: a1b2c3d4e5f6...와 같은 64자리 hex 문자열
SECRET_KEY=Your_Secret_Key_Here_Use_Openssl_Rand_Hex_32

# JWT 알고리즘 (HS256, HS384, HS512 중 선택)
ALGORITHM=HS256
# 액세스 토큰 만료 시간 (분)
ACCESS_TOKEN_EXPIRE_MINUTES=30
# 리프레시 토큰 만료 시간 (일)
REFRESH_TOKEN_EXPIRE_DAYS=7
# 인증 우회가 허용된 공개 API 경로 목록 (쉼표로 구분, 기본값 없음)
# 예) OpenClaw 콜백을 공개로 열어야 외부/로컬 Gateway에서 호출 가능
# PUBLIC_API_PATHS=/api/v1/openclaw/callback
# Redis 장애 시 비활성화 사용자 차단을 유지하기 위한 fail-safe 모드
SESSION_BLACKLIST_FAIL_SAFE=true
# Redis 장애 시 DB로 사용자 활성 상태를 확인하여 차단 여부를 판단
SESSION_BLACKLIST_DB_FALLBACK=true

# 환경 설정 (development, production)
# production으로 설정 시 HTTPS 전용 쿠키 사용
ENVIRONMENT=development

# 로깅 레벨 (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# ========================================
# Sentry 설정
# ========================================
# DSN이 비어 있으면 Sentry 비활성화
SENTRY_DSN=
# 명시하지 않으면 ENVIRONMENT 값을 사용
SENTRY_ENVIRONMENT=
# 릴리즈 버전(명시하지 않으면 GITHUB_SHA fallback)
SENTRY_RELEASE=
# 트레이스/프로파일 샘플링 비율 (0.0 ~ 1.0)
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=1.0
# 기본 PII 수집 여부
SENTRY_SEND_DEFAULT_PII=true
# logger.error 이벤트 전송 여부
SENTRY_ENABLE_LOG_EVENTS=true

# ========================================
# Redis 설정
# ========================================
# 방법 1: Redis 연결 URL 직접 설정 (권장)
# 전체 URL을 설정하면 개별 설정은 무시됩니다
REDIS_URL=redis://localhost:6379/0

# 방법 2: Redis 개별 설정 (REDIS_URL이 설정되지 않은 경우에만 사용)
# Redis 호스트
# REDIS_HOST=localhost
# Redis 포트
# REDIS_PORT=6379
# Redis 데이터베이스 번호
# REDIS_DB=0
# Redis 비밀번호 (없으면 비워두기)
# REDIS_PASSWORD=
# Redis SSL 사용 여부
# REDIS_SSL=false

# Redis 연결 풀 설정
# 최대 연결 수
REDIS_MAX_CONNECTIONS=10
# 소켓 타임아웃 (초)
REDIS_SOCKET_TIMEOUT=5
# 소켓 연결 타임아웃 (초)
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ========================================
# 환경별 Redis URL 설정 예시
# ========================================
# 개발 환경
# REDIS_URL=redis://localhost:6379/0

# 프로덕션 환경 (비밀번호 포함)
# REDIS_URL=redis://:your_password@your-redis-host.com:6379/0

# 프로덕션 환경 (SSL 사용)
# REDIS_URL=rediss://:your_password@your-redis-host.com:6379/0

# Docker 환경
# REDIS_URL=redis://auto_trader_redis:6379/0

# 클라우드 Redis (예: AWS ElastiCache)
# REDIS_URL=redis://:your_password@your-elasticache-endpoint.cache.amazonaws.com:6379/0

# 모니터링 테스트 라우트를 외부에 노출할지 여부
EXPOSE_MONITORING_TEST_ROUTES=false
# API 문서(Swagger/Redoc) 활성화 여부 (개발: true, 프로덕션: false)
DOCS_ENABLED=true

# 거래 알림 설정
# 거래 알림은 TELEGRAM_TOKEN과 TELEGRAM_CHAT_ID가 설정되어 있으면 자동으로 활성화됩니다.
# 매수/매도 주문, AI 분석 완료 시 알림을 Telegram으로 전송합니다.

# ========================================
# Caddy (Reverse Proxy) 설정
# ========================================
# Let's Encrypt 인증서 발급용 이메일
ACME_EMAIL=your_email@example.com
# 서비스 도메인 (예: your-domain.duckdns.org)
DOMAIN_NAME=your_domain.com

# Finnhub API (optional - for US stock news and fundamentals)
FINNHUB_API_KEY=blah
